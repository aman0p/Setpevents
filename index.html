<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StepEvents.com - Event Management Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Mock Database
        const mockDatabase = {
            users: [
                { id: 1, email: 'admin@stepevents.com', password: 'admin123', role: 'admin', name: 'Admin User', phone: '1234567890' },
                { id: 2, email: 'john@example.com', password: 'user123', role: 'user', name: 'John Doe', phone: '9876543210' }
            ],
            events: [
                {
                    id: 1,
                    title: 'Community Clean-up Drive',
                    description: 'Join us for a community clean-up event to help keep our neighborhood beautiful.',
                    date: '2025-08-15',
                    time: '09:00',
                    location: 'Central Park, Main Street',
                    category: 'Environmental',
                    volunteersNeeded: 20,
                    status: 'active',
                    createdBy: 1,
                    image: 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400'
                },
                {
                    id: 2,
                    title: 'Food Bank Distribution',
                    description: 'Help distribute food to families in need at our local food bank.',
                    date: '2025-08-20',
                    time: '14:00',
                    location: 'Community Center, Downtown',
                    category: 'Social Service',
                    volunteersNeeded: 15,
                    status: 'active',
                    createdBy: 1,
                    image: 'https://images.unsplash.com/photo-1593113598332-cd288d649433?w=400'
                },
                {
                    id: 3,
                    title: 'Youth Mentorship Program',
                    description: 'Mentor young people and help them develop important life skills.',
                    date: '2025-08-25',
                    time: '16:00',
                    location: 'Youth Center, Eastside',
                    category: 'Education',
                    volunteersNeeded: 10,
                    status: 'active',
                    createdBy: 1,
                    image: 'https://images.unsplash.com/photo-1544717297-fa95b6ee9643?w=400'
                }
            ],
            applications: [
                { id: 1, eventId: 2, userId: 2, status: 'pending', appliedAt: '2025-08-10T10:00:00Z', message: 'I would love to help with food distribution!' }
            ]
        };

        // Main App Component
        const App = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentView, setCurrentView] = useState('login');
            const [events, setEvents] = useState(mockDatabase.events);
            const [applications, setApplications] = useState(mockDatabase.applications);

            // Authentication Functions
            const login = (email, password) => {
                const user = mockDatabase.users.find(u => u.email === email && u.password === password);
                if (user) {
                    setCurrentUser(user);
                    setCurrentView(user.role === 'admin' ? 'admin-dashboard' : 'user-dashboard');
                    return true;
                }
                return false;
            };

            const logout = () => {
                setCurrentUser(null);
                setCurrentView('login');
            };

            const register = (userData) => {
                const newUser = {
                    id: mockDatabase.users.length + 1,
                    ...userData,
                    role: 'user'
                };
                mockDatabase.users.push(newUser);
                setCurrentUser(newUser);
                setCurrentView('user-dashboard');
            };

            // Event Management Functions
            const createEvent = (eventData) => {
                const newEvent = {
                    id: events.length + 1,
                    ...eventData,
                    createdBy: currentUser.id,
                    status: 'active'
                };
                setEvents([...events, newEvent]);
                return newEvent;
            };

            const updateEvent = (eventId, updates) => {
                setEvents(events.map(event => 
                    event.id === eventId ? { ...event, ...updates } : event
                ));
            };

            const deleteEvent = (eventId) => {
                setEvents(events.filter(event => event.id !== eventId));
            };

            // Application Management Functions
            const applyForEvent = (eventId, message) => {
                const newApplication = {
                    id: applications.length + 1,
                    eventId,
                    userId: currentUser.id,
                    status: 'pending',
                    appliedAt: new Date().toISOString(),
                    message
                };
                setApplications([...applications, newApplication]);
                return newApplication;
            };

            const updateApplicationStatus = (applicationId, status) => {
                setApplications(applications.map(app => 
                    app.id === applicationId ? { ...app, status } : app
                ));
            };

            // Login Component
            const LoginForm = () => {
                const [email, setEmail] = useState('');
                const [password, setPassword] = useState('');
                const [isRegister, setIsRegister] = useState(false);
                const [name, setName] = useState('');
                const [phone, setPhone] = useState('');
                const [error, setError] = useState('');

                const handleSubmit = (e) => {
                    e.preventDefault();
                    setError('');

                    if (isRegister) {
                        if (!name || !email || !password || !phone) {
                            setError('All fields are required');
                            return;
                        }
                        register({ name, email, password, phone });
                    } else {
                        if (!login(email, password)) {
                            setError('Invalid credentials');
                        }
                    }
                };

                return (
                    <div className="min-h-screen flex items-center justify-center p-4">
                        <div className="glass-card p-8 w-full max-w-md animate-fade-in">
                            <div className="text-center mb-8">
                                <h1 className="text-4xl font-bold text-white mb-2">StepEvents</h1>
                                <p className="text-white/80">Event Management Platform</p>
                            </div>

                            <form onSubmit={handleSubmit} className="space-y-4">
                                {isRegister && (
                                    <>
                                        <input
                                            type="text"
                                            placeholder="Full Name"
                                            value={name}
                                            onChange={(e) => setName(e.target.value)}
                                            className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                        />
                                        <input
                                            type="tel"
                                            placeholder="Phone Number"
                                            value={phone}
                                            onChange={(e) => setPhone(e.target.value)}
                                            className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                        />
                                    </>
                                )}
                                <input
                                    type="email"
                                    placeholder="Email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                />
                                <input
                                    type="password"
                                    placeholder="Password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                />
                                
                                {error && (
                                    <div className="bg-red-500/20 text-red-100 p-3 rounded-lg border border-red-400/30">
                                        {error}
                                    </div>
                                )}

                                <button
                                    type="submit"
                                    className="w-full btn-primary text-white p-3 rounded-lg font-semibold"
                                >
                                    {isRegister ? 'Register' : 'Login'}
                                </button>
                            </form>

                            <div className="mt-6 text-center">
                                <button
                                    onClick={() => setIsRegister(!isRegister)}
                                    className="text-white/80 hover:text-white transition-colors"
                                >
                                    {isRegister ? 'Already have an account? Login' : "Don't have an account? Register"}
                                </button>
                            </div>

                            <div className="mt-4 p-3 bg-white/10 rounded-lg text-sm text-white/80">
                                <p><strong>Demo Credentials:</strong></p>
                                <p>Admin: admin@stepevents.com / admin123</p>
                                <p>User: john@example.com / user123</p>
                            </div>
                        </div>
                    </div>
                );
            };

            // Navigation Component
            const Navigation = () => {
                const isAdmin = currentUser?.role === 'admin';
                
                return (
                    <nav className="glass-card m-4 p-4">
                        <div className="flex justify-between items-center">
                            <div className="flex items-center space-x-6">
                                <h1 className="text-2xl font-bold text-white">StepEvents</h1>
                                <div className="flex space-x-4">
                                    {isAdmin ? (
                                        <>
                                            <button
                                                onClick={() => setCurrentView('admin-dashboard')}
                                                className={`px-4 py-2 rounded-lg text-white transition-colors ${
                                                    currentView === 'admin-dashboard' ? 'bg-white/30' : 'hover:bg-white/20'
                                                }`}
                                            >
                                                Dashboard
                                            </button>
                                            <button
                                                onClick={() => setCurrentView('admin-events')}
                                                className={`px-4 py-2 rounded-lg text-white transition-colors ${
                                                    currentView === 'admin-events' ? 'bg-white/30' : 'hover:bg-white/20'
                                                }`}
                                            >
                                                Events
                                            </button>
                                            <button
                                                onClick={() => setCurrentView('admin-applications')}
                                                className={`px-4 py-2 rounded-lg text-white transition-colors ${
                                                    currentView === 'admin-applications' ? 'bg-white/30' : 'hover:bg-white/20'
                                                }`}
                                            >
                                                Applications
                                            </button>
                                        </>
                                    ) : (
                                        <>
                                            <button
                                                onClick={() => setCurrentView('user-dashboard')}
                                                className={`px-4 py-2 rounded-lg text-white transition-colors ${
                                                    currentView === 'user-dashboard' ? 'bg-white/30' : 'hover:bg-white/20'
                                                }`}
                                            >
                                                Browse Events
                                            </button>
                                            <button
                                                onClick={() => setCurrentView('user-profile')}
                                                className={`px-4 py-2 rounded-lg text-white transition-colors ${
                                                    currentView === 'user-profile' ? 'bg-white/30' : 'hover:bg-white/20'
                                                }`}
                                            >
                                                My Profile
                                            </button>
                                            <button
                                                onClick={() => setCurrentView('user-applications')}
                                                className={`px-4 py-2 rounded-lg text-white transition-colors ${
                                                    currentView === 'user-applications' ? 'bg-white/30' : 'hover:bg-white/20'
                                                }`}
                                            >
                                                My Applications
                                            </button>
                                        </>
                                    )}
                                </div>
                            </div>
                            <div className="flex items-center space-x-4">
                                <span className="text-white/80">Welcome, {currentUser?.name}</span>
                                <button
                                    onClick={logout}
                                    className="px-4 py-2 bg-red-500/80 hover:bg-red-500 text-white rounded-lg transition-colors"
                                >
                                    Logout
                                </button>
                            </div>
                        </div>
                    </nav>
                );
            };

            // Admin Dashboard
            const AdminDashboard = () => {
                const pendingApplications = applications.filter(app => app.status === 'pending');
                const totalEvents = events.length;
                const activeEvents = events.filter(e => e.status === 'active').length;

                return (
                    <div className="p-6 animate-fade-in">
                        <h2 className="text-3xl font-bold text-white mb-6">Admin Dashboard</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div className="glass-card p-6 text-center">
                                <h3 className="text-4xl font-bold text-white mb-2">{totalEvents}</h3>
                                <p className="text-white/80">Total Events</p>
                            </div>
                            <div className="glass-card p-6 text-center">
                                <h3 className="text-4xl font-bold text-white mb-2">{activeEvents}</h3>
                                <p className="text-white/80">Active Events</p>
                            </div>
                            <div className="glass-card p-6 text-center">
                                <h3 className="text-4xl font-bold text-white mb-2">{pendingApplications.length}</h3>
                                <p className="text-white/80">Pending Applications</p>
                            </div>
                        </div>

                        <div className="glass-card p-6">
                            <h3 className="text-xl font-semibold text-white mb-4">Recent Applications</h3>
                            {pendingApplications.length > 0 ? (
                                <div className="space-y-3">
                                    {pendingApplications.slice(0, 5).map(app => {
                                        const event = events.find(e => e.id === app.eventId);
                                        const user = mockDatabase.users.find(u => u.id === app.userId);
                                        return (
                                            <div key={app.id} className="bg-white/10 p-4 rounded-lg">
                                                <div className="flex justify-between items-start">
                                                    <div>
                                                        <h4 className="text-white font-medium">{user?.name}</h4>
                                                        <p className="text-white/70 text-sm">Applied for: {event?.title}</p>
                                                        <p className="text-white/60 text-xs mt-1">{app.message}</p>
                                                    </div>
                                                    <div className="flex space-x-2">
                                                        <button
                                                            onClick={() => updateApplicationStatus(app.id, 'approved')}
                                                            className="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors"
                                                        >
                                                            Approve
                                                        </button>
                                                        <button
                                                            onClick={() => updateApplicationStatus(app.id, 'rejected')}
                                                            className="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors"
                                                        >
                                                            Reject
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            ) : (
                                <p className="text-white/70">No pending applications</p>
                            )}
                        </div>
                    </div>
                );
            };

            // Admin Events Management
            const AdminEvents = () => {
                const [showCreateForm, setShowCreateForm] = useState(false);
                const [editingEvent, setEditingEvent] = useState(null);

                const EventForm = ({ event = null, onSave, onCancel }) => {
                    const [formData, setFormData] = useState({
                        title: event?.title || '',
                        description: event?.description || '',
                        date: event?.date || '',
                        time: event?.time || '',
                        location: event?.location || '',
                        category: event?.category || 'Environmental',
                        volunteersNeeded: event?.volunteersNeeded || 10,
                        image: event?.image || ''
                    });

                    const handleSubmit = (e) => {
                        e.preventDefault();
                        if (event) {
                            updateEvent(event.id, formData);
                        } else {
                            createEvent(formData);
                        }
                        onSave();
                    };

                    return (
                        <div className="glass-card p-6 mb-6">
                            <h3 className="text-xl font-semibold text-white mb-4">
                                {event ? 'Edit Event' : 'Create New Event'}
                            </h3>
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <input
                                    type="text"
                                    placeholder="Event Title"
                                    value={formData.title}
                                    onChange={(e) => setFormData({...formData, title: e.target.value})}
                                    className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    required
                                />
                                <textarea
                                    placeholder="Event Description"
                                    value={formData.description}
                                    onChange={(e) => setFormData({...formData, description: e.target.value})}
                                    className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50 h-24"
                                    required
                                />
                                <div className="grid grid-cols-2 gap-4">
                                    <input
                                        type="date"
                                        value={formData.date}
                                        onChange={(e) => setFormData({...formData, date: e.target.value})}
                                        className="p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                        required
                                    />
                                    <input
                                        type="time"
                                        value={formData.time}
                                        onChange={(e) => setFormData({...formData, time: e.target.value})}
                                        className="p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                        required
                                    />
                                </div>
                                <input
                                    type="text"
                                    placeholder="Location"
                                    value={formData.location}
                                    onChange={(e) => setFormData({...formData, location: e.target.value})}
                                    className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    required
                                />
                                <div className="grid grid-cols-2 gap-4">
                                    <select
                                        value={formData.category}
                                        onChange={(e) => setFormData({...formData, category: e.target.value})}
                                        className="p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    >
                                        <option value="Environmental">Environmental</option>
                                        <option value="Social Service">Social Service</option>
                                        <option value="Education">Education</option>
                                        <option value="Health">Health</option>
                                        <option value="Arts & Culture">Arts & Culture</option>
                                    </select>
                                    <input
                                        type="number"
                                        placeholder="Volunteers Needed"
                                        value={formData.volunteersNeeded}
                                        onChange={(e) => setFormData({...formData, volunteersNeeded: parseInt(e.target.value)})}
                                        className="p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                        min="1"
                                        required
                                    />
                                </div>
                                <input
                                    type="url"
                                    placeholder="Image URL (optional)"
                                    value={formData.image}
                                    onChange={(e) => setFormData({...formData, image: e.target.value})}
                                    className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                />
                                <div className="flex space-x-4">
                                    <button
                                        type="submit"
                                        className="flex-1 btn-primary text-white p-3 rounded-lg font-semibold"
                                    >
                                        {event ? 'Update Event' : 'Create Event'}
                                    </button>
                                    <button
                                        type="button"
                                        onClick={onCancel}
                                        className="flex-1 bg-gray-500/80 hover:bg-gray-500 text-white p-3 rounded-lg font-semibold transition-colors"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    );
                };

                return (
                    <div className="p-6 animate-fade-in">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-3xl font-bold text-white">Events Management</h2>
                            <button
                                onClick={() => setShowCreateForm(true)}
                                className="btn-primary text-white px-6 py-3 rounded-lg font-semibold"
                            >
                                Create New Event
                            </button>
                        </div>

                        {showCreateForm && (
                            <EventForm
                                onSave={() => setShowCreateForm(false)}
                                onCancel={() => setShowCreateForm(false)}
                            />
                        )}

                        {editingEvent && (
                            <EventForm
                                event={editingEvent}
                                onSave={() => setEditingEvent(null)}
                                onCancel={() => setEditingEvent(null)}
                            />
                        )}

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            {events.map(event => (
                                <div key={event.id} className="glass-card p-6">
                                    {event.image && (
                                        <img 
                                            src={event.image} 
                                            alt={event.title}
                                            className="w-full h-48 object-cover rounded-lg mb-4"
                                        />
                                    )}
                                    <h3 className="text-xl font-semibold text-white mb-2">{event.title}</h3>
                                    <p className="text-white/80 mb-3">{event.description}</p>
                                    <div className="space-y-2 text-sm text-white/70 mb-4">
                                        <p><strong>Date:</strong> {event.date} at {event.time}</p>
                                        <p><strong>Location:</strong> {event.location}</p>
                                        <p><strong>Category:</strong> {event.category}</p>
                                        <p><strong>Volunteers Needed:</strong> {event.volunteersNeeded}</p>
                                    </div>
                                    <div className="flex space-x-3">
                                        <button
                                            onClick={() => setEditingEvent(event)}
                                            className="px-4 py-2 bg-blue-500/80 hover:bg-blue-500 text-white rounded-lg transition-colors"
                                        >
                                            Edit
                                        </button>
                                        <button
                                            onClick={() => deleteEvent(event.id)}
                                            className="px-4 py-2 bg-red-500/80 hover:bg-red-500 text-white rounded-lg transition-colors"
                                        >
                                            Delete
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // Admin Applications Management
            const AdminApplications = () => {
                const getApplicationsWithDetails = () => {
                    return applications.map(app => ({
                        ...app,
                        event: events.find(e => e.id === app.eventId),
                        user: mockDatabase.users.find(u => u.id === app.userId)
                    }));
                };

                const applicationsWithDetails = getApplicationsWithDetails();

                return (
                    <div className="p-6 animate-fade-in">
                        <h2 className="text-3xl font-bold text-white mb-6">Volunteer Applications</h2>
                        
                        <div className="glass-card p-6">
                            {applicationsWithDetails.length > 0 ? (
                                <div className="space-y-4">
                                    {applicationsWithDetails.map(app => (
                                        <div key={app.id} className="bg-white/10 p-4 rounded-lg">
                                            <div className="flex justify-between items-start">
                                                <div className="flex-1">
                                                    <h4 className="text-white font-semibold">{app.user?.name}</h4>
                                                    <p className="text-white/80">{app.user?.email}</p>
                                                    <p className="text-white/70 mt-2"><strong>Event:</strong> {app.event?.title}</p>
                                                    <p className="text-white/60 text-sm mt-1">{app.message}</p>
                                                    <p className="text-white/50 text-xs mt-2">
                                                        Applied: {new Date(app.appliedAt).toLocaleDateString()}
                                                    </p>
                                                </div>
                                                <div className="flex items-center space-x-3">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                                        app.status === 'pending' ? 'bg-yellow-500/80 text-yellow-100' :
                                                        app.status === 'approved' ? 'bg-green-500/80 text-green-100' :
                                                        'bg-red-500/80 text-red-100'
                                                    }`}>
                                                        {app.status.charAt(0).toUpperCase() + app.status.slice(1)}
                                                    </span>
                                                    {app.status === 'pending' && (
                                                        <div className="flex space-x-2">
                                                            <button
                                                                onClick={() => updateApplicationStatus(app.id, 'approved')}
                                                                className="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors"
                                                            >
                                                                Approve
                                                            </button>
                                                            <button
                                                                onClick={() => updateApplicationStatus(app.id, 'rejected')}
                                                                className="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors"
                                                            >
                                                                Reject
                                                            </button>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <p className="text-white/70 text-center py-8">No applications yet</p>
                            )}
                        </div>
                    </div>
                );
            };

            // User Dashboard - Browse Events
            const UserDashboard = () => {
                const [selectedCategory, setSelectedCategory] = useState('All');
                const [searchTerm, setSearchTerm] = useState('');

                const categories = ['All', 'Environmental', 'Social Service', 'Education', 'Health', 'Arts & Culture'];

                const filteredEvents = events.filter(event => {
                    const matchesCategory = selectedCategory === 'All' || event.category === selectedCategory;
                    const matchesSearch = event.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                        event.description.toLowerCase().includes(searchTerm.toLowerCase());
                    return matchesCategory && matchesSearch && event.status === 'active';
                });

                const hasApplied = (eventId) => {
                    return applications.some(app => app.eventId === eventId && app.userId === currentUser.id);
                };

                const handleApply = (eventId) => {
                    const message = prompt('Please enter a message about why you want to volunteer for this event:');
                    if (message) {
                        applyForEvent(eventId, message);
                        alert('Application submitted successfully!');
                    }
                };

                return (
                    <div className="p-6 animate-fade-in">
                        <h2 className="text-3xl font-bold text-white mb-6">Browse Events</h2>
                        
                        {/* Search and Filter */}
                        <div className="glass-card p-4 mb-6">
                            <div className="flex flex-col md:flex-row gap-4">
                                <input
                                    type="text"
                                    placeholder="Search events..."
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    className="flex-1 p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                />
                                <select
                                    value={selectedCategory}
                                    onChange={(e) => setSelectedCategory(e.target.value)}
                                    className="p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                >
                                    {categories.map(category => (
                                        <option key={category} value={category}>{category}</option>
                                    ))}
                                </select>
                            </div>
                        </div>

                        {/* Events Grid */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                            {filteredEvents.map(event => (
                                <div key={event.id} className="glass-card p-6 hover:transform hover:scale-105 transition-all duration-300">
                                    {event.image && (
                                        <img 
                                            src={event.image} 
                                            alt={event.title}
                                            className="w-full h-48 object-cover rounded-lg mb-4"
                                        />
                                    )}
                                    <div className="mb-2">
                                        <span className="px-2 py-1 bg-white/20 text-white text-xs rounded-full">
                                            {event.category}
                                        </span>
                                    </div>
                                    <h3 className="text-xl font-semibold text-white mb-2">{event.title}</h3>
                                    <p className="text-white/80 mb-3 line-clamp-3">{event.description}</p>
                                    <div className="space-y-1 text-sm text-white/70 mb-4">
                                        <p><strong>üìÖ Date:</strong> {event.date} at {event.time}</p>
                                        <p><strong>üìç Location:</strong> {event.location}</p>
                                        <p><strong>üë• Volunteers Needed:</strong> {event.volunteersNeeded}</p>
                                    </div>
                                    {hasApplied(event.id) ? (
                                        <div className="bg-green-500/20 text-green-100 p-3 rounded-lg text-center">
                                            ‚úì Applied
                                        </div>
                                    ) : (
                                        <button
                                            onClick={() => handleApply(event.id)}
                                            className="w-full btn-primary text-white p-3 rounded-lg font-semibold"
                                        >
                                            Apply to Volunteer
                                        </button>
                                    )}
                                </div>
                            ))}
                        </div>

                        {filteredEvents.length === 0 && (
                            <div className="glass-card p-8 text-center">
                                <p className="text-white/70 text-lg">No events found matching your criteria.</p>
                            </div>
                        )}
                    </div>
                );
            };

            // User Profile Management
            const UserProfile = () => {
                const [isEditing, setIsEditing] = useState(false);
                const [formData, setFormData] = useState({
                    name: currentUser?.name || '',
                    email: currentUser?.email || '',
                    phone: currentUser?.phone || ''
                });

                const handleSave = () => {
                    // Update user in mock database
                    const userIndex = mockDatabase.users.findIndex(u => u.id === currentUser.id);
                    if (userIndex !== -1) {
                        mockDatabase.users[userIndex] = { ...currentUser, ...formData };
                        setCurrentUser({ ...currentUser, ...formData });
                    }
                    setIsEditing(false);
                    alert('Profile updated successfully!');
                };

                return (
                    <div className="p-6 animate-fade-in">
                        <h2 className="text-3xl font-bold text-white mb-6">My Profile</h2>
                        
                        <div className="glass-card p-6 max-w-2xl">
                            {isEditing ? (
                                <div className="space-y-4">
                                    <input
                                        type="text"
                                        placeholder="Full Name"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    />
                                    <input
                                        type="email"
                                        placeholder="Email"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    />
                                    <input
                                        type="tel"
                                        placeholder="Phone Number"
                                        value={formData.phone}
                                        onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                        className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    />
                                    <div className="flex space-x-4">
                                        <button
                                            onClick={handleSave}
                                            className="flex-1 btn-primary text-white p-3 rounded-lg font-semibold"
                                        >
                                            Save Changes
                                        </button>
                                        <button
                                            onClick={() => setIsEditing(false)}
                                            className="flex-1 bg-gray-500/80 hover:bg-gray-500 text-white p-3 rounded-lg font-semibold transition-colors"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    <div className="text-center mb-6">
                                        <div className="w-24 h-24 bg-white/20 rounded-full mx-auto flex items-center justify-center mb-4">
                                            <span className="text-3xl text-white">{currentUser?.name?.charAt(0)}</span>
                                        </div>
                                        <h3 className="text-2xl font-semibold text-white">{currentUser?.name}</h3>
                                    </div>
                                    <div className="space-y-3">
                                        <div className="bg-white/10 p-4 rounded-lg">
                                            <label className="text-white/70 text-sm">Email</label>
                                            <p className="text-white font-medium">{currentUser?.email}</p>
                                        </div>
                                        <div className="bg-white/10 p-4 rounded-lg">
                                            <label className="text-white/70 text-sm">Phone</label>
                                            <p className="text-white font-medium">{currentUser?.phone}</p>
                                        </div>
                                        <div className="bg-white/10 p-4 rounded-lg">
                                            <label className="text-white/70 text-sm">Role</label>
                                            <p className="text-white font-medium capitalize">{currentUser?.role}</p>
                                        </div>
                                    </div>
                                    <button
                                        onClick={() => setIsEditing(true)}
                                        className="w-full btn-primary text-white p-3 rounded-lg font-semibold"
                                    >
                                        Edit Profile
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            // User Applications Status
            const UserApplications = () => {
                const userApplications = applications
                    .filter(app => app.userId === currentUser?.id)
                    .map(app => ({
                        ...app,
                        event: events.find(e => e.id === app.eventId)
                    }));

                return (
                    <div className="p-6 animate-fade-in">
                        <h2 className="text-3xl font-bold text-white mb-6">My Applications</h2>
                        
                        <div className="space-y-4">
                            {userApplications.length > 0 ? (
                                userApplications.map(app => (
                                    <div key={app.id} className="glass-card p-6">
                                        <div className="flex justify-between items-start">
                                            <div className="flex-1">
                                                <h3 className="text-xl font-semibold text-white mb-2">{app.event?.title}</h3>
                                                <p className="text-white/80 mb-3">{app.event?.description}</p>
                                                <div className="space-y-1 text-sm text-white/70 mb-3">
                                                    <p><strong>Date:</strong> {app.event?.date} at {app.event?.time}</p>
                                                    <p><strong>Location:</strong> {app.event?.location}</p>
                                                    <p><strong>Applied:</strong> {new Date(app.appliedAt).toLocaleDateString()}</p>
                                                </div>
                                                <p className="text-white/60 text-sm"><strong>Your Message:</strong> {app.message}</p>
                                            </div>
                                            <span className={`px-4 py-2 rounded-full text-sm font-medium ${
                                                app.status === 'pending' ? 'bg-yellow-500/80 text-yellow-100' :
                                                app.status === 'approved' ? 'bg-green-500/80 text-green-100' :
                                                'bg-red-500/80 text-red-100'
                                            }`}>
                                                {app.status.charAt(0).toUpperCase() + app.status.slice(1)}
                                            </span>
                                        </div>
                                    </div>
                                ))
                            ) : (
                                <div className="glass-card p-8 text-center">
                                    <p className="text-white/70 text-lg mb-4">You haven't applied for any events yet.</p>
                                    <button
                                        onClick={() => setCurrentView('user-dashboard')}
                                        className="btn-primary text-white px-6 py-3 rounded-lg font-semibold"
                                    >
                                        Browse Events
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            // Render Current View
            const renderCurrentView = () => {
                if (!currentUser) {
                    return <LoginForm />;
                }

                return (
                    <div className="min-h-screen">
                        <Navigation />
                        {currentView === 'admin-dashboard' && <AdminDashboard />}
                        {currentView === 'admin-events' && <AdminEvents />}
                        {currentView === 'admin-applications' && <AdminApplications />}
                        {currentView === 'user-dashboard' && <UserDashboard />}
                        {currentView === 'user-profile' && <UserProfile />}
                        {currentView === 'user-applications' && <UserApplications />}
                    </div>
                );
            };

            return renderCurrentView();
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
